import { NextResponse } from 'next/server';

export function middleware(request) {
  const authHeader = request.headers.get("authorization");
  const isAuthenticated = authHeader === 'secret-token';

  // If trying to access a private route without authentication
  if (request.nextUrl.pathname.startsWith('/private') && !isAuthenticated) {
    return NextResponse.json(
      {
        error: "Unauthorized",
      },
      { status: 401 }
    );
  }

  return NextResponse.next();
}

// Apply middleware only to private routes
export const config = {
  matcher: ['/private/:path*'],
};